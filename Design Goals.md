项目研发需求文档

#（第一阶段）

🏷 项目名称

Emoji 虚拟人桌面助手（Minimal Floating Emoji Assistant）

🎯 产品目标（阶段一）

打造一个极简但可运行的桌面 Emoji 助手，具备：
	•	桌面浮动 Emoji 虚拟人
	•	基本气泡对话显示
	•	点击互动触发对话输入
	•	简单集成大模型生成回复
	•	感知用户键盘输入（情绪关键词检测）

模块划分与功能定义

1. FloatingEmojiWindow 虚拟人界面
	•	悬浮在屏幕右下角（支持拖动）
	•	Emoji 图案（默认：😺）
	•	无边框、透明背景、总在最前
	•	点击 Emoji 弹出输入对话框

2. SpeechBubbleWidget 对话气泡
	•	相对虚拟人位置浮动显示
	•	支持淡入淡出动画
	•	可以程序调用显示文本内容
	•	显示 LLM 返回的回答或预设语句

3. EmotionDetector 情绪感知模块
	•	基于用户输入字符流构建上下文（滑窗）
	•	预置情绪关键词库（如：烦、累、操、唉等）
	•	检测阈值后发送“情绪触发事件”到主 UI
	•	后续可扩展为接入情感分析模型

4. KeyboardListener 键盘监听模块
	•	使用 pynput.keyboard.Listener 实现
	•	在后台线程中运行，不阻塞主 UI
	•	每次键入字符送入 EmotionDetector

5. ChatInputDialog 用户交互窗口
	•	点击 Emoji 时弹出
	•	简单输入框 + 发送按钮
	•	提交后调用 LLMClient 请求回复

6. LLMClient 大模型接口模块
	•	使用 OpenAI 或 HuggingFace 的 API（可配置）
	•	输入用户消息，输出 assistant 回复
	•	支持异步调用或后台线程方式避免阻塞 UI


🔄 交互流程（主线）
	1.	启动程序，显示悬浮 Emoji。
	2.	后台监听用户键盘，检测输入字符。
	3.	若识别到情绪异常，弹出气泡安慰句子。
	4.	用户点击 Emoji，弹出对话输入窗口。
	5.	用户发送问题，请求大模型回复。
	6.	回复以气泡方式显示在虚拟人旁边。

📁 目录结构
emoji_assistant/
├── main.py
├── ui/
│   ├── floating_head.py
│   └── speech_bubble.py
├── interaction/
│   ├── emotion_detector.py
│   ├── keyboard_listener.py
│   └── chat_input.py
├── core/
│   └── llm_client.py
├── config.py
├── requirements.txt
└── assets/
    └── emoji_icon.png (可选，后续扩展图标)

✅ 界面设计目标
	1.	美观但不打扰视线
	2.	浮动感明显，不嵌入具体窗口
	3.	信息层级清晰，对话内容可读
	4.	易于关闭/拖动/互动

⸻

🎨 设计风格建议（Glassmorphism）
	•	背景：半透明 + 毛玻璃模糊效果（blur）
	•	边框：淡淡的白色描边或发光边
	•	圆角：中度圆角（如 12~20px）
	•	阴影：柔和投影增强悬浮感（如 box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1)）

使用这套框架，以支持更炫酷的前端：Electron + Python


#（第二阶段,记忆研究）
我提出一个“记忆三层系统，简称MemABC”（A-Memory / B-Memory / C-Memory）构想：

🧠 记忆三层结构模型设计：基于类脑机制的对话型AI记忆体系探索

一、研究背景与目标

随着大模型对话系统在交互深度和复杂度上的迅速发展，传统的“无状态”或“有限上下文窗口”机制已难以满足对话智能体长期、可持续学习与行为内化的需求。同时，过长的记忆对于效率、成本、技术都存在很大挑战，然而每天接触的信息有效性估计就是几个百分点。人类记忆的分层结构为人工智能记忆机制的构建提供了重要启示。

本项目提出一种类脑记忆系统的实验性架构名为MemABC，构建三层递进式记忆模型：A-Memory（原始记忆）→ B-Memory（编码记忆）→ C-Memory（深层记忆），以支持AI系统在对话中实现事件存储、意义抽象、个性养成和语言反射等功能。

二、系统结构与功能划分

1. A-Memory：原始记忆层（Active Short-Term Memory）
	•	功能定义：完整保留当前对话轮次的全部信息，包括：
	•	用户输入、AI回应的自然语言内容
	•	对话发生的时间、任务上下文、用户的感受判断（主观信息）
	•	存储特征：
	•	类似人类的“工作记忆”
	•	每轮对话单独生成，实时记录
	•	临时保存，生命周期短
	•	典型应用：
	•	对话回溯、上下文理解、会话跟踪

2. B-Memory：编码记忆层（Compressed Long-Term Memory）
	•	功能定义：对 A-Memory 进行初次语义压缩，提取关键词、任务事件、用户偏好等关键要素，构成可索引的长期语义记忆。
	•	压缩策略：
	•	事件切分（Event Segmentation）
	•	关键词提取与情绪标注
	•	脑补友好的语言残留（便于语义还原）
	•	存储特征：
	•	自动编码于程序关闭/切换阶段，或手动触发
	•	支持多轮事件抽象与多维索引
	•	用途拓展：
	•	多轮对话总结
	•	记忆回显与知识图谱构建
	•	用户意图演化趋势识别

3. C-Memory：深层记忆层（Reflective Personality Model）
	•	功能定义：基于 B-Memory 的多轮积累，提取并固化 AI 系统的长期行为模式、个性特征、熟练技能、条件反应机制、语言风格等。
	•	演化机制：
	•	自动提取高频关键词和行为线索
	•	构建个性偏好向量（如语言风格：结构化表达、喜好使用命令式）
	•	条件反射设计（如“提到XXX关键词→触发YYY模块”）
	•	潜在功能：
	•	人格一致性（Personality Coherence）
	•	用户画像个性化记忆联想
	•	常识性判断微调（如任务优先级偏好）

三、动态压缩与存储机制
	•	每层记忆设定容量限制为10MB，超出后进行递归压缩（例如保留高权重事件、关键词频率统计，降低冗余）。
	•	支持历史记忆冷存储机制，便于恢复、复训、对抗遗忘。
	•	示例压缩策略：

{
  "compressed_event_id": "20250712-01",
  "keywords": ["记忆三层结构", "编码压缩", "性格建模"],
  "weight": 0.91,
  "compressed_ratio": "50%～80%"
}

四、系统特性与研究价值

维度	描述
类脑模拟性	模拟人类从感知→抽象→性格形成的心理过程，具神经拟态价值
行为可塑性	支持长期记忆演化为个性倾向，实现真正可“训练”的AI性格
记忆可控性	每层记忆可配置大小、清除策略、压缩算法，支持边缘运行或本地部署
多任务适应	可应用于对话机器人、AI陪伴体、学习型智能助手、用户画像系统等
前瞻性探索	为下一代具“人格记忆能力”的 AI 系统提供核心架构参考

五、研究方法
- 先进行A,B,C记忆形成过程试验，全部使用txt明文，评估存储量，压缩方法等。
- 建立梦境测试工具，对A,B,C记忆进行造梦试验，评估信息还原度。
- 连接到当前系统，进行用户测试。

